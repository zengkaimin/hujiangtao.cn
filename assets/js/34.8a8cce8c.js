(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{88:function(t,e,s){"use strict";s.r(e);var r=s(0),a=Object(r.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("p"),t._m(2),s("p"),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),s("p",[t._v("搜索了一下，找到了原因和解决方案，如下")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),s("p",[t._v("既然是因为升级之前没有正常停止mysql，那就在之前的版本重新正常停止对应的服务就好了")]),t._v(" "),t._m(9),t._v(" "),t._m(10),s("p",[t._v("具体解决方式如下：")]),t._v(" "),t._m(11),t._m(12),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://blog.notzheng.com/p/brew-mysql-cant-start-solve.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("brew 升级 mysql 8.0 后不能启动的解决方法 - 不郑不郑"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://gist.github.com/nrollr/3f57fc15ded7dddddcc4e82fe137b58e#gistcomment-2672661",target:"_blank",rel:"noopener noreferrer"}},[t._v("fix Install MySQL on macOS Sierra - GitHub"),s("OutboundLink")],1)])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"修复homebrew升级mysql版本导致mysql无法启动的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修复homebrew升级mysql版本导致mysql无法启动的问题","aria-hidden":"true"}},[this._v("#")]),this._v(" 修复Homebrew升级mysql版本导致mysql无法启动的问题")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目录","aria-hidden":"true"}},[this._v("#")]),this._v(" 目录")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#目录"}},[this._v("目录")])]),e("li",[e("a",{attrs:{href:"#简介"}},[this._v("简介")])]),e("li",[e("a",{attrs:{href:"#原因"}},[this._v("原因")])]),e("li",[e("a",{attrs:{href:"#解决方案"}},[this._v("解决方案")])]),e("li",[e("a",{attrs:{href:"#reference"}},[this._v("Reference")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简介","aria-hidden":"true"}},[this._v("#")]),this._v(" 简介")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("升级其他软件的时候，无意间通过brew升级了所有的软件，\n这导致mysql也升级至对应的最新版本"),e("code",[this._v("mysql@8.0")]),this._v("，之前的版本是"),e("code",[this._v("mysql@5.7")]),this._v("，\n但是在升级过程中是没有停止mysql服务的，这就导致了一些问题，\n今天连接数据库的时候就出现了一些问题，连接不上")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ mysql.server start\nStarting MySQL\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(" ERROR"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" The server quit without updating PID "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/usr/local/var/mysql/wai.local.pid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"原因"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#原因","aria-hidden":"true"}},[this._v("#")]),this._v(" 原因")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("升级之前 mysql 没有正常停止（crash 了），导致mysql数据出错")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"解决方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决方案","aria-hidden":"true"}},[this._v("#")]),this._v(" 解决方案")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("既然说不支持崩溃后的升级，也就是说在升级之前 mysql 没有正常停止（crash 了）。\n那我就在上一个（brew upgrade之前的）版本中正常停止它好咯。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("The main reason is that the older version `mysql@5.7` not stopped\nwhile you upgrade mysql by homebrew, and something inside mysql data was broken.\nSo you should reinstall older version mysql and stop the mysql services first.\nThen upgrade mysql data by mysql_upgrade to fix the broken data.\nThen you can uninstall older version or not, and latest version can be used yet.\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[this._v("$ brew "),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v(" mysql@5.7\n$ brew services stop mysql "),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v("&&")]),this._v(" brew services start mysql@5.7\n$ brew services stop mysql@5.7 "),e("span",{pre:!0,attrs:{class:"token operator"}},[this._v("&&")]),this._v(" brew services start mysql\n$ mysql_upgrade -u root -p\n$ brew uninstall mysql@5.7\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"reference"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reference","aria-hidden":"true"}},[this._v("#")]),this._v(" Reference")])}],!1,null,null,null);e.default=a.exports}}]);