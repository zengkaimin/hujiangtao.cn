<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>pyenv &amp; pipenv 管理Python项目环境依赖 | 木先生</title>
    <meta name="description" content="pyenv &amp; pipenv 管理Python项目环境依赖">
    <link rel="icon" href="/favicon.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/favicon.png">
  <meta name="msapplication-TileImage" content="/favicon.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.593102d0.css" as="style"><link rel="preload" href="/assets/js/app.9c3b2f40.js" as="script"><link rel="preload" href="/assets/js/48.34232f7f.js" as="script"><link rel="prefetch" href="/assets/js/10.db6d2b23.js"><link rel="prefetch" href="/assets/js/11.5eec0cf0.js"><link rel="prefetch" href="/assets/js/12.48cc16ff.js"><link rel="prefetch" href="/assets/js/13.227a98da.js"><link rel="prefetch" href="/assets/js/14.dd432dff.js"><link rel="prefetch" href="/assets/js/15.1937fbfb.js"><link rel="prefetch" href="/assets/js/16.249d8c5c.js"><link rel="prefetch" href="/assets/js/17.f336ed5e.js"><link rel="prefetch" href="/assets/js/18.4a0023fb.js"><link rel="prefetch" href="/assets/js/19.47d9327c.js"><link rel="prefetch" href="/assets/js/2.1faa0878.js"><link rel="prefetch" href="/assets/js/20.c4cd5dc9.js"><link rel="prefetch" href="/assets/js/21.2faac9e3.js"><link rel="prefetch" href="/assets/js/22.6159852d.js"><link rel="prefetch" href="/assets/js/23.4d8c66d7.js"><link rel="prefetch" href="/assets/js/24.ef8ce863.js"><link rel="prefetch" href="/assets/js/25.3cf50925.js"><link rel="prefetch" href="/assets/js/26.67d3b388.js"><link rel="prefetch" href="/assets/js/27.bf825405.js"><link rel="prefetch" href="/assets/js/28.0cb8a491.js"><link rel="prefetch" href="/assets/js/29.99578b0c.js"><link rel="prefetch" href="/assets/js/3.386eea71.js"><link rel="prefetch" href="/assets/js/30.252f5b97.js"><link rel="prefetch" href="/assets/js/31.028178c1.js"><link rel="prefetch" href="/assets/js/32.340c7f35.js"><link rel="prefetch" href="/assets/js/33.1e9d0600.js"><link rel="prefetch" href="/assets/js/34.8a8cce8c.js"><link rel="prefetch" href="/assets/js/35.c94db349.js"><link rel="prefetch" href="/assets/js/36.0b7766b9.js"><link rel="prefetch" href="/assets/js/37.2ff91466.js"><link rel="prefetch" href="/assets/js/38.d9462a48.js"><link rel="prefetch" href="/assets/js/39.52a2f1e0.js"><link rel="prefetch" href="/assets/js/4.77a79f01.js"><link rel="prefetch" href="/assets/js/40.8f3c38e6.js"><link rel="prefetch" href="/assets/js/41.4006441f.js"><link rel="prefetch" href="/assets/js/42.c98081d3.js"><link rel="prefetch" href="/assets/js/43.2fc9c209.js"><link rel="prefetch" href="/assets/js/44.366bd44e.js"><link rel="prefetch" href="/assets/js/45.9baec45e.js"><link rel="prefetch" href="/assets/js/46.5d5e5cb3.js"><link rel="prefetch" href="/assets/js/47.474d0da3.js"><link rel="prefetch" href="/assets/js/49.269eae44.js"><link rel="prefetch" href="/assets/js/5.b97c8e99.js"><link rel="prefetch" href="/assets/js/50.ddc90ea9.js"><link rel="prefetch" href="/assets/js/51.0d496ebd.js"><link rel="prefetch" href="/assets/js/52.5de4cba2.js"><link rel="prefetch" href="/assets/js/53.291d0b51.js"><link rel="prefetch" href="/assets/js/54.12c976d1.js"><link rel="prefetch" href="/assets/js/55.fcf3c75d.js"><link rel="prefetch" href="/assets/js/6.5fe59aa3.js"><link rel="prefetch" href="/assets/js/7.e4119528.js"><link rel="prefetch" href="/assets/js/8.b36d15bf.js"><link rel="prefetch" href="/assets/js/9.d504111d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.593102d0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">木先生</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/post/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div><div class="nav-item"><a href="/contact.html" class="nav-link">Contact</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/post/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="/about.html" class="nav-link">About</a></div><div class="nav-item"><a href="/contact.html" class="nav-link">Contact</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Windows</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>TensorFlow</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Python</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/post/Python/2019-06-20-Python packages.html" class="sidebar-link">Python packages</a></li><li><a href="/post/Python/2019-06-12-清理Python项目中的pyc文件.html" class="sidebar-link">清理Python项目中的pyc文件</a></li><li><a href="/post/Python/2018-08-03-Python函数缓存器functools.lru_cache.html" class="sidebar-link">Python 函数缓存器functools.lru_cache</a></li><li><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html" class="active sidebar-link">pyenv &amp; pipenv 管理Python项目环境依赖</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#目录" class="sidebar-link">目录</a></li><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#pyenv" class="sidebar-link">pyenv</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#设置" class="sidebar-link">设置</a></li><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#使用" class="sidebar-link">使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#pipenv" class="sidebar-link">pipenv</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#简介-2" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#安装-2" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#设置-2" class="sidebar-link">设置</a></li><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#使用-2" class="sidebar-link">使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#pycharm设置使用pipenv" class="sidebar-link">PyCharm设置使用pipenv</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#设置方式" class="sidebar-link">设置方式</a></li></ul></li><li class="sidebar-sub-header"><a href="/post/Python/2018-07-16-pyenv和pipenv管理Python项目环境依赖.html#reference" class="sidebar-link">Reference</a></li></ul></li><li><a href="/post/Python/2018-06-27-Python脚本demo.html" class="sidebar-link">Python-Script-Demo</a></li><li><a href="/post/Python/2018-06-21-Tornado参考.html" class="sidebar-link">Tornado参考</a></li><li><a href="/post/Python/2018-06-15-Python工具类.html" class="sidebar-link">Python 工具类</a></li><li><a href="/post/Python/2018-05-23-Python-Tornado做API服务时适配XSRF-cookie检查.html" class="sidebar-link">Python Tornado做API服务时适配XSRF cookie检查</a></li><li><a href="/post/Python/2018-05-16-Python获取第二天凌晨时间.html" class="sidebar-link">Python获取第二天凌晨时间</a></li><li><a href="/post/Python/2018-05-07-Python进阶阅读.html" class="sidebar-link">Python进阶阅读</a></li><li><a href="/post/Python/2018-04-09-Python-Tornado后台服务器跨域设置示例.html" class="sidebar-link">Python-Tornado服务器后台跨域设置示例</a></li><li><a href="/post/Python/2018-01-23-Python项目架构的思考.html" class="sidebar-link">Python项目架构的思考</a></li><li><a href="/post/Python/2017-12-14-Python实现定时任务初步探索.html" class="sidebar-link">Python实现定时任务的初步探索</a></li><li><a href="/post/Python/2017-11-24-Python项目生成requirements_txt.html" class="sidebar-link">Python项目生成requirements</a></li><li><a href="/post/Python/2017-01-19-一个Python简单项目框架的建立流程.html" class="sidebar-link">一个Python简单项目框架的建立流程</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>MySQL</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Mac</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>API</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="pyenv-pipenv-管理python项目环境依赖"><a href="#pyenv-pipenv-管理python项目环境依赖" aria-hidden="true" class="header-anchor">#</a> pyenv &amp; pipenv 管理Python项目环境依赖</h1> <p>我们在创建Python项目时候经常会碰到的一个问题是
不同Python版本的项目管理或者是要管理多个环境依赖的时候，
往往会选择创建虚拟环境或者是多个依赖共存的方案，
但是以上两个方案都不是很理想。
一下尝试通过pyenv和pipenv给出一个比较方便的多环境多依赖的解决方案和实践。</p> <h2 id="目录"><a href="#目录" aria-hidden="true" class="header-anchor">#</a> 目录</h2> <p></p><div class="table-of-contents"><ul><li><a href="#目录">目录</a></li><li><a href="#pyenv">pyenv</a><ul><li><a href="#简介">简介</a></li><li><a href="#安装">安装</a></li><li><a href="#设置">设置</a></li><li><a href="#使用">使用</a></li></ul></li><li><a href="#pipenv">pipenv</a><ul><li><a href="#简介">简介</a></li><li><a href="#安装">安装</a></li><li><a href="#设置">设置</a></li><li><a href="#使用">使用</a></li></ul></li><li><a href="#pycharm设置使用pipenv">PyCharm设置使用pipenv</a><ul><li><a href="#设置方式">设置方式</a></li></ul></li><li><a href="#reference">Reference</a></li></ul></div><p></p> <h2 id="pyenv"><a href="#pyenv" aria-hidden="true" class="header-anchor">#</a> pyenv</h2> <h3 id="简介"><a href="#简介" aria-hidden="true" class="header-anchor">#</a> 简介</h3> <blockquote><p>pyenv是Python版本管理工具，利用它我们可以在同一台电脑上安装多个版本的Python
完美的解决了python版本的管理问题</p></blockquote> <h3 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h3> <p>使用 <code>brew</code> 安装，主要是方便管理，非Mac下再使用 <code>git</code> 手动安装或其他方式</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ brew <span class="token function">install</span> pyenv
$ brew upgrade pyenv
</code></pre></div><h3 id="设置"><a href="#设置" aria-hidden="true" class="header-anchor">#</a> 设置</h3> <p>安装成功之后需要在.bashrc或者.bash_profile或.zshrc中添加两行来开启自动补全</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># setting for pyenv</span>
<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$HOME</span>/.pyenv/bin:<span class="token variable">$PATH</span>&quot;</span>
<span class="token function">eval</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>pyenv init -<span class="token variable">)</span></span>&quot;</span>
</code></pre></div><p><strong>这一步在安装pyenv完成后建议立即进行设置，不然在后面的Python版本切换和控制中会不生效，
尤其是 <code>pyenv init -</code> 的设置，<code>pyenv shell &lt;version&gt;</code> 是依赖于它的。</strong></p> <h3 id="使用"><a href="#使用" aria-hidden="true" class="header-anchor">#</a> 使用</h3> <ul><li>help文档</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pyenv
$ pyenv <span class="token function">help</span>
</code></pre></div><ul><li>查看管理的Python版本</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pyenv versions
</code></pre></div><p>列出系统&amp;pyenv安装的Python版本，pyenv只管理系统和pyenv安装的Python</p> <ul><li>列出所有pipenv可安装的版本</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pyenv <span class="token function">install</span> --list
</code></pre></div><ul><li>安装指定版本</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pyenv <span class="token function">install</span> <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
$ pyenv <span class="token function">install</span> 3.6.5
$ pyenv <span class="token function">install</span> 2.7.14
</code></pre></div><ul><li>Python版本管理</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pyenv global <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>  <span class="token comment"># 全局设置python版本为指定版本，设置全局的 Python 版本，通过将版本号写入 ~/.pyenv/version 文件的方式。</span>
$ pyenv local <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>   <span class="token comment"># 设置当前路径下python版本为指定版本，设置 Python 本地版本，通过将版本号写入当前目录下的 .python-version 文件的方式。通过这种方式设置的 Python 版本优先级较 global 高。</span>
$ pyenv shell <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>   <span class="token comment"># 设置当前shell窗口使用的python版本为指定版本，设置面向 shell 的 Python 版本，通过设置当前 shell 的 PYENV_VERSION 环境变量的方式。这个版本的优先级比 local 和 global 都要高。–unset 参数可以用于取消当前 shell 设定的版本。</span>
</code></pre></div><p>使用pyenv切换Python 版本之后可以通过which python或者是python --version来查看是否生效。</p> <ul><li>Python版本的优先级</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>shell <span class="token operator">&gt;</span> local <span class="token operator">&gt;</span> global
</code></pre></div><p>pyenv会从当前目录开始向上逐级查找.python-versiob文件，直到根目录为止，若找不到，则使用global版本。</p> <ul><li>创建垫片路径</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pyenv rehash
</code></pre></div><p>为所有已安装的可执行文件创建 shims，如：<code>~/.pyenv/versions/*/bin/*</code>，
因此，每当你增删了 Python 版本或带有可执行文件的包（如 pip）以后，都应该执行一次本命令</p> <ul><li>Python卸载</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pyenv isntall <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span> <span class="token comment"># 安装版本号为&lt;version&gt;的Python</span>
$ pyenv uninstall <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span> <span class="token comment">#卸载版本号为&lt;version&gt;的Python</span>
</code></pre></div><h2 id="pipenv"><a href="#pipenv" aria-hidden="true" class="header-anchor">#</a> pipenv</h2> <h3 id="简介-2"><a href="#简介-2" aria-hidden="true" class="header-anchor">#</a> 简介</h3> <blockquote><p>pipenv是Python官方推荐的包管理工具。</p> <blockquote><p>Pipenv — the officially recommended Python packaging tool from Python.org, free (as in freedom).</p></blockquote></blockquote> <p>它综合了 virtualenv , pip 和 pyenv 三者的功能。能够自动为项目创建和管理虚拟环境。
pipenv使用 Pipfile 和 Pipfile.lock 来管理依赖包，并且在使用pipenv添加或删除包时，
自动维护 Pipfile 文件，同时生成 Pipfile.lock 来锁定安装包的版本和依赖信息，避免构建错误。
相比pip需要手动维护requirements.txt 中的安装包和版本，具有很大的进步。</p> <p>pipenv的思路简单理解便是把pip和virutalenv 2个工具统一起来，使用 pipenv 来代替。
其核心内容主要有两点</p> <div class="language- extra-class"><pre class="language-text"><code>1. pipenv 使用 Pipfile 来代替 requirement.txt 文件记录python包。
2. 增加了Pipfile.lock 文件来锁定python软件的包名及版本，以及其依赖关系的列表。
</code></pre></div><h3 id="安装-2"><a href="#安装-2" aria-hidden="true" class="header-anchor">#</a> 安装</h3> <p><strong>尝试过使用pip install --user pipenv 和 brew install pipenv，安装的版本是不一样的</strong>
这里建议使用 <code>brew</code> 安装，主要是方便管理，非Mac下再使用 <code>pip</code> 安装</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ brew <span class="token function">install</span> pipenv
$ brew upgrade pipenv
</code></pre></div><h3 id="设置-2"><a href="#设置-2" aria-hidden="true" class="header-anchor">#</a> 设置</h3> <p>我们希望在每个项目的根目录下保存虚拟环境目录（.venv），
需要在 .bashrc 或 .bash_profile 中添加如下配置：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># setting for pipenv</span>
<span class="token function">export</span> PIPENV_VENV_IN_PROJECT<span class="token operator">=</span>1
</code></pre></div><p>退出编辑后执行：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">source</span> ~/.bashrc
或者
$ <span class="token function">source</span> ~/.bash_profile
</code></pre></div><h3 id="使用-2"><a href="#使用-2" aria-hidden="true" class="header-anchor">#</a> 使用</h3> <p><strong>pipenv 的使用之前要确保pyenv在当前目录和当前shell环境设置了正确的Python版本</strong></p> <ul><li>新项目创建虚拟环境</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> pipenv_demo
$ <span class="token function">cd</span> pipenv_demo
<span class="token comment"># 初始化一个python3虚拟环境</span>
<span class="token comment"># 如果想初始化pyhton2的虚拟环境，则使用pipenv --two</span>
<span class="token comment"># 或者指定版本pipenv --python 3.6.5 或者 pipenv --python 2.7.14</span>
$ pipenv --three
</code></pre></div><ul><li>已经存在的项目创建虚拟环境</li></ul> <p>直接在该项目根目录下创建</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cd</span> pipenv_demo
$ pipenv --three
</code></pre></div><p>创建完虚拟环境之后，在pipenv_demo目录下将会看到一个.venv的目录，这个目录就是pipenv_demo项目的虚拟环境。
还有一个文件Pipfile，这是一个yoml格式的文件，相当于requirements.txt的作用，用来记录pip的各种安装信息</p> <ul><li>安装卸载包</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pipenv <span class="token function">install</span> flask
$ pipenv <span class="token function">install</span> pytest --dev   <span class="token comment"># 用于区分需要部署到线上的开发包、只需要在测试环境中执行的包</span>
$ pipenv uninstall flask
</code></pre></div><ul><li>通过requirements安装包</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pipenv <span class="token function">install</span> -r requirements.txt
<span class="token comment"># 生成requirements文件</span>
$ pipenv lock -r <span class="token punctuation">[</span>--dev<span class="token punctuation">]</span> <span class="token operator">&gt;</span> requirements.txt
</code></pre></div><ul><li>安装项目中所有的依赖包</li></ul> <p>安装项目中Pipfile和Pipfile.lock中记录的所有依赖</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 安装[packages]下的包</span>
$ pipenv <span class="token function">install</span>

<span class="token comment"># 安装[dev-packages]下的包</span>
$ pipenv <span class="token function">install</span> -d
</code></pre></div><p>上面的方法都是安装Pipfile中列出来的第三方包的最新版本，
如果是想安装Pipfile.lock中固定版本的第三方依赖包，需要执行：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pipenv <span class="token function">install</span> --ignore-pipfile
</code></pre></div><ul><li>检查已安装的包</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pipenv graph
</code></pre></div><p>在安装依赖包完成以后，项目根目录会增加两个文件，分别是Pipfile和Pipfile.lock，
一个文件是Pipfile，这是一个yoml格式的文件，Pipfile.lock是json格式的文件，
这两个文件相当于requirements.txt的作用，记录了此项目的第三方依赖包，
这两个文件的区别是 Pipfile中安装的包不包含包的具体版本号，而Pipfile.lock是包含包的具体的版本号的</p> <ul><li>运行虚拟环境</li></ul> <p>启动虚拟环境的shell环境，可以直接在虚拟环境下开发</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pipenv shell
$ <span class="token function">source</span> /path_to_.venv/bin/activate
$ pipenv shell --anyway
</code></pre></div><p>也可以运行项目</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ pipenv run python xxx.py
</code></pre></div><ul><li>删除虚拟环境</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cd</span> pipenv_demo
$ pipenv --rm
</code></pre></div><p>执行完毕后可发现项目根目录下的.venv目录已经删除，但是Pipfile被留下了</p> <ul><li>注意事项</li></ul> <p>在安装时，指定--dev参数，则只安装[dev-packages]下的包,
若安装时不定指定--dev参数，只会安装[packages] 包下面的模块。</p> <p>可以更新 pypi源来提高依赖库安装的速度，修改 <code>Pipfile</code> 文件中的 <code>[[source]]</code> 的 <code>url</code>，
设置为国内镜像源</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span><span class="token punctuation">[</span>source<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment">#url = &quot;https://pypi.org/simple&quot;</span>
url <span class="token operator">=</span> <span class="token string">&quot;https://pypi.tuna.tsinghua.edu.cn/simple&quot;</span>
verify_ssl <span class="token operator">=</span> <span class="token boolean">true</span>
name <span class="token operator">=</span> <span class="token string">&quot;pypi&quot;</span>
</code></pre></div><ul><li>开发建议</li></ul> <p>建议团队内开发人员，在自己电脑上都安装pyenv和pipenv。
Pipfile和Pipfile.lock加入版本跟踪，.venv不要加入版本管理。
为自己的每一个项目建立独立的虚拟环境。</p> <h2 id="pycharm设置使用pipenv"><a href="#pycharm设置使用pipenv" aria-hidden="true" class="header-anchor">#</a> PyCharm设置使用pipenv</h2> <h3 id="设置方式"><a href="#设置方式" aria-hidden="true" class="header-anchor">#</a> 设置方式</h3> <div class="language- extra-class"><pre class="language-text"><code>在 Preferences/Project: demo/Project Interpreter 设置下选择
add... &gt; Existing environment &gt; Interpreter 中选择 /path_to_.venv/bin/python
</code></pre></div><h2 id="reference"><a href="#reference" aria-hidden="true" class="header-anchor">#</a> Reference</h2> <ul><li><a href="https://www.jianshu.com/p/2b0b652eaa50" target="_blank" rel="noopener noreferrer">Mac OS下使用pyenv管理Python版本 - 简书<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://blog.csdn.net/liuchunming033/article/details/79582617" target="_blank" rel="noopener noreferrer">利用pipenv和pyenv管理多个相互独立的Python虚拟开发环境 - CSDN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://segmentfault.com/a/1190000012837890" target="_blank" rel="noopener noreferrer">pipenv 更优雅的管理你的python开发环境 - segmentfault<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.zengyuetian.com/?p=2655" target="_blank" rel="noopener noreferrer">PYTHON实践32-PYCHARM里使用PIPENV创建的环境<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.jianshu.com/p/00af447f0005" target="_blank" rel="noopener noreferrer">Python新利器之pipenv - 简书<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.jetbrains.com/help/pycharm/2018.2/pipenv.html" target="_blank" rel="noopener noreferrer">Configuring Pipenv Environment - PyCharm 2018.2 Help<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/20/2018, 5:17:32 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.9c3b2f40.js" defer></script><script src="/assets/js/48.34232f7f.js" defer></script>
  </body>
</html>
